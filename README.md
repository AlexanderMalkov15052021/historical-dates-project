# historical-dates-project
Animated block with date intervals

Инструкция для запуска

Node.js v20.10.0

1. git clone https://github.com/AlexanderMalkov15052021/historical-dates-project
2. npm i
3. npm run build или npm run dev
4. npm start
5. http://localhost:3000

Задеплоеный проект: http://x90590af.beget.tech/test_tasks/historical-dates/


Описание проекта

Технологии:

Next 14, React 18, Typescript,  React-spring/web, Next-redux-wrapper, Reduxjs/toolkit,  React-transition-group, SASS, Swiper, Json-server, Concurrently

Детали реализации:

1. Диапазон дат вычисляется на основе данных запроса, то есть, если изменить объекты в файле “db.json”, то диапазон будет корректен в не зависимости расположения и самих дат (в базе данные могут храниться как угодно)


2. Анимация смены дат в десктопной реализации выполнена посредство react-spring/web, так как эту же либу использую для анимации окружностей. Возможна реализация при помощи библиотеки react-animated-numbers, более эффектная реализация, но надо костылить иначе не будет работать с резиновой версткой и самими переключениями дат. Отдал предпочтение надежности и поддерживаемости


3. Интерактивные окружности, по клику на которые, происходит смена “жанра” и смена данных в карусели - это просто вёрстка. Точно такой же эффект есть у Fabric.js, чтобы не добавлять канвас и дополнительную зависимость, реализовал версткой


4. Блок управления со стрелками (влево, вправо) просто меняет локальный стейт компоненты. Для чего? Чтобы каждый блок был независим по логике. В файле modules/CarouselPage/CarouselPage.tsx есть комментарий, который можно раскомментировать или просто добавить еще блоки и все они будут работать независимо друг от друга


5. Переключение карусели анимируется через React-transition-group. Стрелки кастомные, логика появления или исчезновения самописная. Добавлен эффект свайпа и смены курсора. Размеры вычисляются динамически. Через кастомный хук useWindowSize


6. Респонсив через Медиа-запросы, цвета через глобальные SASS-переменные, линии - либо бордеры, либо after, before псевдоселекторы


7. Как определяются углы между интерактивными окружностями (Math.PI * 2 / circleCount) через функцию getCircleAngles, зная углы надо по высоте взять синус умноженный на радиус (из хука useWindowSize деленное на два, так как это радиус)  и по ширине тоже самое только косинус. Чтобы это всё ожило надо получившееся значение передать спрингу и так как каждая окружность это отдельная компонента со своим положением, то индексы сместятся по кругу каждый на своё новое место, да и ещё по тайминг функции.  По умолчанию circleCount равен шести, но вообще можно сделать не константой а значением на выбор и всё будет работать, а лучше от данных в базе или ограничить данными на сервере, но оставить на выбор


8. В опубликованной версии есть различия. Во первых, это статика, нет SSR и на беке заглушка PHP, для отправки запросов. Заглушка просто берёт из json файла данные, то есть нет базы, нет sql запросов. Локально запускается Next и поднимается Json-сервер в конкурентном режиме одной командой npm run dev


9. SSR реализовано на app router и pages router. На pages router реализовано через Next-redux-wrapper соответственно нет необходимости прописывать данные пропсами, можно работать через стейт-менеджер. App router пока не имеет таких возможностей, либо я не владею. Чтобы посмотреть pages router надо просто открыть проект, а чтобы открыть app router надо перейти по адресу http://localhost:3000/appRouter. Всё тоже самое, только реализация другая

PS Webpack тут я сам не настраивал, хотя раньше использовал без create-react-app или next-app, а этот проект стандартный create-next-app за исключением небольших конфигов